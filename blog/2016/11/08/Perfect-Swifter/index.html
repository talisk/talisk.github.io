
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯ | taliskæ–¯æ¸©çš„æŠ€æœ¯åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta name="description" content="å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯ã€‚">
<meta property="og:type" content="article">
<meta property="og:title" content="å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯">
<meta property="og:url" content="http://blog.talisk.cn/blog/2016/11/08/Perfect-Swifter/index.html">
<meta property="og:site_name" content="taliskæ–¯æ¸©çš„æŠ€æœ¯åšå®¢">
<meta property="og:description" content="å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯ã€‚">
<meta property="og:updated_time" content="2016-11-08T07:22:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯">
<meta name="twitter:description" content="å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯ã€‚">
  
    <link rel="alternative" href="/atom.xml" title="taliskæ–¯æ¸©çš„æŠ€æœ¯åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">taliskæ–¯æ¸©çš„æŠ€æœ¯åšå®¢</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">ä½ å¥½ï¼Œè¯·é—®éœ€è¦ä»€ä¹ˆå¸®åŠ©ï¼Ÿ</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="http://www.talisk.cn/">ä¸ªäººä¸»é¡µ</a>
        
          <a class="main-nav-link" href="/">åšå®¢é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">å½’æ¡£</a>
        
          <a class="main-nav-link" href="/about">è‡ªè¿°</a>
        
          <a class="main-nav-link" href="http://wiki.talisk.cn/">Wiki</a>
        
          <a class="main-nav-link" href="/works">ä½œå“</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="blog.talisk.cn">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-Perfect-Swifter" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/11/08/Perfect-Swifter/" class="article-date">
  <time datetime="2016-11-08T11:29:51.000Z" itemprop="datePublished">2016-11-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a>â–º<a class="article-category-link" href="/categories/æŠ€æœ¯/iOS/">iOS</a>â–º<a class="article-category-link" href="/categories/æŠ€æœ¯/iOS/å­¦ä¹ ç¬”è®°/">å­¦ä¹ ç¬”è®°</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯
    </h1>
  

      </header>
    
    
      <div class="entry">
        
          <div id="toc" class="toc-article">
    <div class="toc-title">æ–‡ç« ç›®å½•</div>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#æˆ‘å†™äº†å•¥"><span class="toc-text">æˆ‘å†™äº†å•¥</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å¼€å§‹å¹²è´§"><span class="toc-text">å¼€å§‹å¹²è´§</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å‘ç¯å¢ƒ"><span class="toc-text">å¼€å‘ç¯å¢ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é¡¹ç›®åˆå§‹åŒ–"><span class="toc-text">é¡¹ç›®åˆå§‹åŒ–</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é¡¹ç›®é…ç½®"><span class="toc-text">é¡¹ç›®é…ç½®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¿è¡ŒæœåŠ¡å™¨"><span class="toc-text">è¿è¡ŒæœåŠ¡å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è·¯ç”±"><span class="toc-text">è·¯ç”±</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MongoDBæ•°æ®åº“"><span class="toc-text">MongoDBæ•°æ®åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®‰è£…"><span class="toc-text">å®‰è£…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#é…ç½®"><span class="toc-text">é…ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å¯è§†åŒ–å·¥å…·"><span class="toc-text">å¯è§†åŒ–å·¥å…·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ•°æ®åº“è¿æ¥"><span class="toc-text">æ•°æ®åº“è¿æ¥</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è¿‡æ»¤å™¨"><span class="toc-text">è¿‡æ»¤å™¨</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ä½•å»ä½•ä»"><span class="toc-text">ä½•å»ä½•ä»</span></a></li></ol>
</div>
        
      </div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä¸Šä¸ªæœˆæœ‰ä¸€ä»¶è®©Swifterå…´å¥‹çš„äº‹æƒ…ï¼šè‹¹æœå®˜æ–¹å¯åŠ¨äº†Swiftè¯­è¨€æœåŠ¡å™¨ç«¯å¼€å‘å·¥ä½œç»„ã€‚è¿™æ„å‘³ç€å®˜æ–¹æ­£å¼è¡¨æ€ï¼ŒSwiftè¿›å†›æœåŠ¡å™¨ç«¯å¼€å‘ã€‚</p>
<p>å‰å‡ å¤©æˆ‘å‚åŠ äº†iDevå…¨å¹³å°è‹¹æœå¼€å‘è€…å¤§ä¼šï¼Œä¼šä¸Šæ¨æ™–è€å¸ˆå¸¦é¢†æˆ‘ä»¬å¯¹Swiftçš„æœåŠ¡å™¨ç«¯å¼€å‘å‰æ™¯åšäº†åˆ†æï¼Œå¯¹Swiftè¯­è¨€ç›®å‰çš„å‡ å¤§æœåŠ¡å™¨ç«¯å¼€å‘æ¡†æ¶è¿›è¡Œäº†å‰–æï¼Œè¯´å®è¯æ”¶è·å¹¶ä¸å¤šï¼Œå› ä¸ºæˆ‘ä¹‹å‰ä¹Ÿåœ¨æŒç»­å…³æ³¨è¿™ä¸€å—çš„ä¿¡æ¯ï¼Œä½†å¯¹æˆ‘çš„å¯å‘æ˜¯éå¸¸å¤§çš„ï¼Œè¿™ç›´æ¥å¯¼è‡´ä¼šåå‡ å¤©æ¯å¤©éƒ½å¿ƒé‡Œç—’ï¼Œæƒ³å†™ç‚¹ä»€ä¹ˆã€‚</p>
<p>äºæ˜¯æˆ‘å°±å†™äº†ç‚¹ä»€ä¹ˆğŸ˜‚</p>
<a id="more"></a>
<h1 id="æˆ‘å†™äº†å•¥"><a href="#æˆ‘å†™äº†å•¥" class="headerlink" title="æˆ‘å†™äº†å•¥"></a>æˆ‘å†™äº†å•¥</h1><p>æˆ‘çš„æ¯•ä¸šè®¾è®¡æ­£å¥½éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ç«¯APIï¼Œä¹‹å‰ç”¨Node.jså†™äº†ä¸€ç‚¹ï¼Œä¸è¿‡è¿˜æ²¡åšå®Œï¼Œè¿™æ¬¡æ­£å¥½è¶ç€è¿™ä¸ªæœºä¼šï¼Œç”¨Swiftæ¥å†™ä¸€å†™ï¼Œå²‚ä¸æ˜¯ç¾å“‰ç¾å“‰ã€‚</p>
<p>è¿™æ¬¡æˆ‘ç”¨æœ€æ–°çš„Perfect 2.0.2æ¡†æ¶ï¼Œæœ€æ–°çš„Xcode 8.1ï¼ˆå®æµ‹ï¼Œ8.0ç¼–è¯‘æ—¶æœ‰bugï¼‰ï¼Œè¿›è¡Œå¼€å‘ã€‚è‡³äºä¸ºä»€ä¹ˆåœ¨ä¼—å¤šSwiftæœåŠ¡å™¨ç«¯æ¡†æ¶ä¸­æŒ‘ä¸­äº†Perfectï¼Œæ— ä»–ï¼Œæ˜Ÿå¤šè€Œå·²ã€‚</p>
<p>æˆ‘ä¸ä¿è¯ä½ åœ¨åç»­ç‰ˆæœ¬ä¸­ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨æˆ‘ä»‹ç»çš„APIï¼Œè€Œä¸”å®˜æ–¹è™½ç„¶æä¾›äº†ä¸­æ–‡æ–‡æ¡£ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å‘¨è¾¹å·¥å…·ã€ä¸­é—´ä»¶çš„è¯¦å°½æ–‡æ¡£ï¼Œä½†æœ‰ç›¸å½“ä¸€éƒ¨åˆ†çš„å†…å®¹ä¸ç¬¦åˆæœ€æ–°ç‰ˆæœ¬Perfectçš„APIã€‚æ‰€ä»¥è¸©å‘è¿˜éœ€åæ¥äººã€‚æ‰¯çš„å¤ªå¤šäº†ï¼Œä¸‹é¢ä¸Šå¹²è´§ã€‚</p>
<h1 id="å¼€å§‹å¹²è´§"><a href="#å¼€å§‹å¹²è´§" class="headerlink" title="å¼€å§‹å¹²è´§"></a>å¼€å§‹å¹²è´§</h1><h2 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h2><p>é¦–å…ˆä½ è¦æœ‰ä¸ªmacOSæ¥è¿›è¡Œå¼€å‘ï¼Œå¹¶ä¿è¯å®‰è£…äº†æœ€æ–°çš„Xcode 8.1ã€‚Ubuntuç¡®å®å¯ä»¥å®‰è£…Swiftï¼Œå¹¶å¯¹é¡¹ç›®è¿›è¡Œç¼–è¯‘ï¼Œä½†ç»è¿‡å’Œä¸€äº›å¼€å‘è€…äº¤æµï¼Œç›®å‰ä¸»æµå¼€å‘æ–¹å¼è¿˜æ˜¯ç”¨macOSå¼€å‘ï¼Œéƒ¨ç½²åˆ°UbuntuæœåŠ¡å™¨ä¸Šã€‚</p>
<h2 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="headerlink" title="é¡¹ç›®åˆå§‹åŒ–"></a>é¡¹ç›®åˆå§‹åŒ–</h2><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡SwiftPackageManageræ¥åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir MySwiftServer</div><div class="line">vi Package.swift</div></pre></td></tr></table></figure>
<p>ä»¥ä¸Šï¼Œæ–°å»ºä¸€ä¸ª<code>MySwiftServer</code>æ–‡ä»¶å¤¹ï¼Œç”¨Vimæ–°å»ºä¸€ä¸ª<code>Package.swift</code>æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ä½ å¯ä»¥ç†è§£ä¸ºCocoaPodä¸­çš„<code>Podfile</code>ã€‚</p>
<p>åœ¨<code>Package.swift</code>ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PackageDescription</div><div class="line"></div><div class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</div><div class="line">    name: <span class="string">"MySwiftServer"</span>,</div><div class="line">    dependencies: [</div><div class="line">        .<span class="type">Package</span>(</div><div class="line">        url: <span class="string">"https://github.com/PerfectlySoft/Perfect-HTTPServer.git"</span>,</div><div class="line">        majorVersion: <span class="number">2</span>, minor: <span class="number">0</span></div><div class="line">        )</div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
<p>è¯­æ³•æ˜¯ä¸æ˜¯æŒºç†Ÿæ‚‰ï¼Œè¿™æ®µSwiftä»£ç æ˜¯ä½œä¸ºé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œè¡¨æ˜äº†æˆ‘ä»¬çš„é¡¹ç›®åã€æ‰€éœ€ä¾èµ–å’Œä¾èµ–çš„ç‰ˆæœ¬ã€‚</p>
<p>ä¿å­˜å¥½è¯¥æ–‡ä»¶ï¼Œå›åˆ°ç»ˆç«¯ï¼Œæ‰§è¡Œ<code>swift build</code>ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘ä¼šä»ä»“åº“cloneæ‰€æœ‰çš„dependenciesåˆ°æœ¬åœ°ï¼Œé€Ÿåº¦å¯èƒ½æœ‰ç‚¹æ…¢ï¼Œå¥½å¥½ç­‰å¾…å°±å¯ä»¥äº†ã€‚</p>
<p>å½“æ‰€æœ‰moduleç¼–è¯‘å®Œæˆåä¼šæç¤ºæˆ‘ä»¬<code>warning: root package &#39;MySwiftServer&#39; does not contain any sources</code>ï¼Œæ„æ€æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰æºä»£ç ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåä¸º<code>Sources</code>ï¼Œç”¨æ¥ä¿å­˜æºæ–‡ä»¶ã€‚åœ¨<code>Sources</code>ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª<code>main.swift</code>æ–‡ä»¶ï¼Œä½œä¸ºç¨‹åºå…¥å£ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PerfectLib</div><div class="line"><span class="keyword">import</span> PerfectHTTP</div><div class="line"><span class="keyword">import</span> PerfectHTTPServer</div><div class="line"></div><div class="line"><span class="keyword">let</span> server = <span class="type">HTTPServer</span>()</div><div class="line"></div><div class="line"><span class="keyword">var</span> routes = <span class="type">Routes</span>()</div><div class="line">routes.add(method: .<span class="keyword">get</span>, uri: <span class="string">"/"</span>, handler: &#123;</div><div class="line">        request, response <span class="keyword">in</span></div><div class="line">        response.setHeader(.contentType, value: <span class="string">"text/html"</span>)</div><div class="line">        response.appendBody(string: <span class="string">"&lt;html&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;"</span>)</div><div class="line">        response.completed()</div><div class="line">    &#125;</div><div class="line">)</div><div class="line">server.addRoutes(routes)</div><div class="line">server.serverPort = <span class="number">8181</span></div><div class="line"> </div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> server.start()</div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">PerfectError</span>.networkError(<span class="keyword">let</span> err, <span class="keyword">let</span> msg) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Error Message: \(err) \(msg)"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ªè·¯ç”±ï¼Œæ˜¯getæ–¹æ³•ï¼Œè·¯å¾„æ˜¯æ ¹è·¯å¾„ï¼Œå¹¶ä¸”è¿”å›äº†ä¸€æ®µhtmlä»£ç ï¼Œè®¾ç½®æœåŠ¡å™¨ç«¯å£ä¸º8181ï¼Œç„¶åæ˜¯ç”¨ä¸€ä¸ªdoå¾ªç¯æ¥é©±åŠ¨äº†æœåŠ¡å™¨ã€‚</p>
<p>é‡æ–°æ‰§è¡Œ<code>swift build</code>ï¼Œå®Œæˆç¼–è¯‘åï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œ<code>.build/debug/MySwiftServer</code>æ¥è¿è¡Œæˆ‘ä»¬çš„ç¨‹åºï¼ŒæœåŠ¡å™¨ä¼šç›‘å¬8181ç«¯å£ã€‚æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥<a href="http://localhost:8181/ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æµè§ˆå™¨é¡µé¢ä¸­æ˜¾ç¤ºHello" target="_blank" rel="external">http://localhost:8181/ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æµè§ˆå™¨é¡µé¢ä¸­æ˜¾ç¤ºHello</a> Worldã€‚</p>
<h2 id="é¡¹ç›®é…ç½®"><a href="#é¡¹ç›®é…ç½®" class="headerlink" title="é¡¹ç›®é…ç½®"></a>é¡¹ç›®é…ç½®</h2><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨SPMæ¥ç”Ÿæˆxcodeprojï¼Œæ‰§è¡Œ<code>swift package generate-xcodeproj</code>ï¼Œå½“æç¤º<code>generated: ./MySwiftServer.xcodeproj</code>åï¼Œå³å¯ç”¨Xcodeæ‰“å¼€é¡¹ç›®ç›®å½•ä¸‹çš„MySwiftServer.xcodeprojæ–‡ä»¶ã€‚</p>
<p>åœ¨Xcodeå·¦ä¾§navigatorä¸­ï¼Œé€‰æ‹©Project-MySwiftServer-Build Settings-Library Search Pathsï¼Œæ·»åŠ <code>&quot;$(PROJECT_DIR)/**&quot;</code>ï¼Œæ³¨æ„è¦åŒ…å«å‰åå¼•å·ã€‚</p>
<p>é…ç½®å®Œæˆåï¼Œå°±å¯ä»¥ç”¨Xcodeæ¥å†™ä»£ç ã€Buildã€Runé¡¹ç›®ã€‚</p>
<h2 id="è¿è¡ŒæœåŠ¡å™¨"><a href="#è¿è¡ŒæœåŠ¡å™¨" class="headerlink" title="è¿è¡ŒæœåŠ¡å™¨"></a>è¿è¡ŒæœåŠ¡å™¨</h2><p>å°è¯•âŒ˜CMD+Rï¼Œè¿è¡Œé¡¹ç›®ï¼Œconsoleä¸­ä¼šæç¤ºæœåŠ¡å™¨å·²ç»åœ¨8181ç«¯å£è·‘èµ·æ¥äº†ã€‚æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥åœ°å€<code>http://localhost:8181/</code>ï¼Œé©¬ä¸Šå¯ä»¥çœ‹åˆ°é¡µé¢ä¸Šæ˜¾ç¤ºæˆ‘ä»¬é…ç½®å¥½çš„Hello Worldé¡µé¢ã€‚</p>
<h2 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h2><p>åœ¨<code>PerfectHTTP</code>ä¸­ï¼Œæœ‰ä¸€ä¸ªstructåä¸º<code>Routes</code>ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å®ƒæ¥æ„å»ºæœåŠ¡å™¨çš„è·¯ç”±ã€‚</p>
<p>åœ¨<code>Sources</code>ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º<code>routeHandlers.swift</code>çš„æ–‡ä»¶ï¼Œåˆ é™¤<code>main.swift</code>ä¸­çš„æœ‰å…³è·¯ç”±éƒ¨åˆ†çš„ä»£ç ï¼Œåˆ é™¤åçš„<code>main.swift</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PerfectLib</div><div class="line"><span class="keyword">import</span> PerfectHTTP</div><div class="line"><span class="keyword">import</span> PerfectHTTPServer</div><div class="line"></div><div class="line"><span class="keyword">let</span> server = <span class="type">HTTPServer</span>()</div><div class="line">server.serverPort = <span class="number">8181</span></div><div class="line"> </div><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">    <span class="keyword">try</span> server.start()</div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">PerfectError</span>.networkError(<span class="keyword">let</span> err, <span class="keyword">let</span> msg) &#123;</div><div class="line">    <span class="built_in">print</span>(<span class="string">"Error Message: \(err) \(msg)"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å°†åˆšåˆšæˆ‘ä»¬åˆ æ‰çš„é‚£éƒ¨åˆ†ä»£ç ï¼Œç²˜è´´åˆ°åˆšåˆšåˆ›å»ºçš„<code>routeHandlers.swift</code>æ–‡ä»¶ä¸­ã€‚<code>routeHandlers.swift</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PerfectLib</div><div class="line"><span class="keyword">import</span> PerfectHTTP</div><div class="line"><span class="keyword">import</span> PerfectHTTPServer</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">signupRoutes</span><span class="params">()</span></span> &#123;</div><div class="line">    addURLRoutes()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">addURLRoutes</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> routes = <span class="type">Routes</span>()</div><div class="line">    routes.add(method: .<span class="keyword">get</span>, uri: <span class="string">"/"</span>, handler: &#123;</div><div class="line">        request, response <span class="keyword">in</span></div><div class="line">        response.setHeader(.contentType, value: <span class="string">"text/html"</span>)</div><div class="line">        response.appendBody(string: <span class="string">"&lt;html&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;"</span>)</div><div class="line">        response.completed()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ï¼Œå°†åˆšåˆšæ·»åŠ çš„â€œHello Worldâ€é¡µè·¯ç”±æ”¾åˆ°äº†ç»Ÿä¸€æ–‡ä»¶ä¸­è¿›è¡Œç®¡ç†ï¼Œç„¶åæˆ‘ä»¬åœ¨<code>main.swift</code>ä¸­ï¼Œè®°å¾—è°ƒç”¨<code>signupRoutes</code>æ–¹æ³•ã€‚ç¼–è¯‘è¿è¡Œï¼Œä¸€åˆ‡æ­£å¸¸ã€‚</p>
<p>ä¸Šé¢ä»£ç ä¸­<code>add</code>æ–¹æ³•æœ€åä¸€ä¸ªå‚æ•°<code>handler</code>æ˜¯ä¼ å…¥ä¸€ä¸ªé—­åŒ…ï¼Œè¯¥é—­åŒ…å®šä¹‰ä¸º<code>public typealias RequestHandler = (HTTPRequest, HTTPResponse) -&gt; ()</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªç¬¦åˆè¯¥ç±»å‹çš„å‚æ•°ä¼ å…¥<code>add</code>æ–¹æ³•ä¸­ã€‚ä¿®æ”¹<code>routeHandlers.swift</code>æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PerfectLib</div><div class="line"><span class="keyword">import</span> PerfectHTTP</div><div class="line"><span class="keyword">import</span> PerfectHTTPServer</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">signupRoutes</span><span class="params">()</span></span> &#123;</div><div class="line">    addURLRoutes()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">addURLRoutes</span><span class="params">()</span></span> &#123;</div><div class="line">    <span class="keyword">var</span> routes = <span class="type">Routes</span>()</div><div class="line">    routes.add(method: .<span class="keyword">get</span>, uri: <span class="string">"/"</span>, handler: helloHandler)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">helloHandler</span><span class="params">(request: HTTPRequest, <span class="number">_</span> response: HTTPResponse)</span></span> &#123;</div><div class="line">    response.setHeader(.contentType, value: <span class="string">"text/html"</span>)</div><div class="line">    response.appendBody(string: <span class="string">"&lt;html&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;"</span>)</div><div class="line">    response.completed()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é‡æ–°è¿è¡Œç¼–è¯‘ï¼Œå®Œå…¨æ²¡é—®é¢˜ã€‚</p>
<h2 id="MongoDBæ•°æ®åº“"><a href="#MongoDBæ•°æ®åº“" class="headerlink" title="MongoDBæ•°æ®åº“"></a>MongoDBæ•°æ®åº“</h2><p>MongoDBæ˜¯ä¸€ç§éå…³ç³»å‹æ•°æ®åº“ï¼Œå¯ä»¥å­˜å‚¨ç±»JSONæ ¼å¼çš„BSONæ•°æ®ï¼Œæ‰€ä»¥æ·±å—å¹¿å¤§å¼€å‘è€…çš„å–œçˆ±ï¼Œæˆ‘ä»¬åœ¨æ­¤ä½¿ç”¨MongoDBä¸¾ä¾‹ã€‚</p>
<p>å¯¹äºå·²ç»ä½¿ç”¨è¿‡MongoDBçš„åŒå­¦ï¼Œå¯ä»¥ä¸ç”¨çœ‹å®‰è£…å’Œé…ç½®éƒ¨åˆ†ã€‚</p>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install mongodb</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬é€šè¿‡HomeBrewæ¥ä¸ºæˆ‘ä»¬çš„Macå®‰è£…MongoDBï¼Œä½†æ˜¯åœ¨El CapitainåŠä¹‹åç‰ˆæœ¬ï¼Œç”±äºSIPçš„åŸå› ï¼Œå¯èƒ½ä¼šåœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­å‡ºç°æƒé™é—®é¢˜ï¼Œå¯ä»¥æš‚æ—¶å…³é—­SIPåŠŸèƒ½ï¼Œåœ¨å®‰è£…å®Œæˆåå†å¼€å¯ï¼Œå…·ä½“ä¸è¡¨ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥è°·æ­Œä¸€ä¸‹â€œ10.11 mac mongodbâ€ã€‚</p>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p><code>mkdir /data/db</code>ï¼šåˆ›å»ºç›®å½•<code>/data/db</code>ï¼Œæ˜¯MongoDBçš„é»˜è®¤å­˜å‚¨ç›®å½•ã€‚</p>
<p><code>chown id -u /data/db</code>ï¼šèµ‹æƒé™ã€‚</p>
<p><code>mongod</code>ï¼šå¼€å¯æœåŠ¡</p>
<p>å”°å”°å”°ï¼Œä¸€å †æ—¥å¿—è¾“å‡ºï¼Œè¿™æ ·å­å°±å¯ä»¥äº†ã€‚</p>
<h3 id="å¯è§†åŒ–å·¥å…·"><a href="#å¯è§†åŒ–å·¥å…·" class="headerlink" title="å¯è§†åŒ–å·¥å…·"></a>å¯è§†åŒ–å·¥å…·</h3><p>macOSå¹³å°ä¸Šï¼Œæœ‰MongoHubå¯è§†åŒ–å·¥å…·ï¼Œä¸è¿‡åœ¨æˆ‘ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°äº†å‡ æ¬¡é—ªé€€ï¼Œä¼°è®¡æ˜¯å¾ˆä¹…æ²¡æ›´æ–°çš„åŸå› å§ï¼Œå¤§å®¶å¦‚æœæœ‰æ¯”è¾ƒå¥½çš„å·¥å…·å¯ä»¥å‘Šè¯‰æˆ‘å“ˆã€‚</p>
<h3 id="æ•°æ®åº“è¿æ¥"><a href="#æ•°æ®åº“è¿æ¥" class="headerlink" title="æ•°æ®åº“è¿æ¥"></a>æ•°æ®åº“è¿æ¥</h3><p>åœ¨<code>Package.swift</code>ä¸­ï¼Œæ·»åŠ MongoDBä¾èµ–ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> PackageDescription</div><div class="line"></div><div class="line"><span class="keyword">let</span> package = <span class="type">Package</span>(</div><div class="line">	name: <span class="string">"PerfectTemplate"</span>,</div><div class="line">	targets: [],</div><div class="line">	dependencies: [</div><div class="line">		.<span class="type">Package</span>(url: <span class="string">"https://github.com/PerfectlySoft/Perfect-HTTPServer.git"</span>, majorVersion: <span class="number">2</span>, minor: <span class="number">0</span>),</div><div class="line">        .<span class="type">Package</span>(url:<span class="string">"https://github.com/PerfectlySoft/Perfect-MongoDB.git"</span>, versions: <span class="type">Version</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>)..&lt;<span class="type">Version</span>(<span class="number">10</span>,<span class="number">0</span>,<span class="number">0</span>))</div><div class="line">    ]</div><div class="line">)</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘ï¼Œåœ¨ç»è¿‡ç­‰å¾…åï¼Œé¡¹ç›®ä¸­å·²ç»æœ‰MongoDBè¿™ä¸ªmoduleäº†ã€‚</p>
<p>åœ¨<code>routeHandlers.swift</code>ä¸­ï¼Œæ·»åŠ <code>import MongoDB</code>ï¼Œå¹¶ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡æŒ‡å®šMongoDBæœåŠ¡å™¨åœ°å€<code>var mongoURL = &quot;mongodb://localhost:27017&quot;</code>ã€‚</p>
<p>æ·»åŠ ä¸€ä¸ªæ–°çš„è·¯ç”±ï¼Œç”¨æ¥æŸ¥æ‰¾æ•°æ®åº“æ•°æ®ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">queryFullDBHandler</span><span class="params">(request: HTTPRequest, <span class="number">_</span> response: HTTPResponse)</span></span> &#123;</div><div class="line">    </div><div class="line">    <span class="comment">// åˆ›å»ºè¿æ¥</span></div><div class="line">    <span class="keyword">let</span> client = <span class="keyword">try</span>! <span class="type">MongoClient</span>(uri: mongoURL)</div><div class="line">    </div><div class="line">    <span class="comment">// è¿æ¥åˆ°å…·ä½“çš„æ•°æ®åº“ï¼Œå‡è®¾æœ‰ä¸ªæ•°æ®åº“åå­—å« test</span></div><div class="line">    <span class="keyword">let</span> db = client.getDatabase(name: <span class="string">"test"</span>)</div><div class="line">    </div><div class="line">    <span class="comment">// å®šä¹‰é›†åˆ</span></div><div class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> collection = db.getCollection(name: <span class="string">"test"</span>) <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// åœ¨å…³é—­è¿æ¥æ—¶æ³¨æ„å…³é—­é¡ºåºä¸å¯åŠ¨é¡ºåºç›¸å</span></div><div class="line">    <span class="keyword">defer</span> &#123;</div><div class="line">        collection.close()</div><div class="line">        db.close()</div><div class="line">        client.close()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// æ‰§è¡ŒæŸ¥è¯¢</span></div><div class="line">    <span class="keyword">let</span> fnd = collection.<span class="built_in">find</span>(query: <span class="type">BSON</span>())</div><div class="line">    </div><div class="line">    <span class="comment">// åˆå§‹åŒ–ä¸€ä¸ªç©ºæ•°ç»„ç”¨äºå­˜æ”¾ç»“æœè®°å½•é›†</span></div><div class="line">    <span class="keyword">var</span> arr = [<span class="type">String</span>]()</div><div class="line">    </div><div class="line">    <span class="comment">// "fnd" æ¸¸æ ‡æ˜¯ä¸€ä¸ª MongoCursor ç±»å‹ï¼Œç”¨äºéå†ç»“æœ</span></div><div class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> fnd! &#123;</div><div class="line">        arr.append(x.asString)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">// è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„ JSON æ•°ç»„ã€‚</span></div><div class="line">    <span class="keyword">let</span> returning = <span class="string">"&#123;\"data\":[\(arr.joined(separator: "</span>,<span class="string">"))]&#125;"</span></div><div class="line">    </div><div class="line">    <span class="comment">// è¿”å› JSON å­—ç¬¦ä¸²</span></div><div class="line">    response.appendBody(string: returning)</div><div class="line">    response.completed()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å°†è¯¥è·¯ç”±éƒ¨ç½²ä¸Šå»ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">addURLRoutes</span><span class="params">()</span></span> &#123;</div><div class="line">    routes.add(method: .<span class="keyword">get</span>, uri: <span class="string">"/mongo"</span>, handler: queryFullDBHandler)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç¼–è¯‘è¿è¡Œï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€<code>http://localhost:8181/mongo</code>å‘ç°è¿”å›ä¸€ä¸ªJSONå¯¹è±¡ï¼š<code>{&quot;data&quot;:[]}</code>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ•°æ®åº“å†™å…¥æ¥å£ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">func addHandler(request: HTTPRequest, _ response: HTTPResponse) &#123;</div><div class="line">    // åˆ›å»ºè¿æ¥</div><div class="line">    let client = try! MongoClient(uri: mongoURL)</div><div class="line">    </div><div class="line">    // è¿æ¥åˆ°å…·ä½“çš„æ•°æ®åº“ï¼Œå‡è®¾æœ‰ä¸ªæ•°æ®åº“åå­—å« test</div><div class="line">    let db = client.getDatabase(name: "test")</div><div class="line">    </div><div class="line">    // å®šä¹‰é›†åˆ</div><div class="line">    guard let collection = db.getCollection(name: "test") else &#123;</div><div class="line">        return</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">	// å®šä¹‰BSOMå¯¹è±¡ï¼Œä»è¯·æ±‚çš„bodyéƒ¨åˆ†å–JSONå¯¹è±¡</div><div class="line">    let bson = try! BSON(json: request.postBodyString!)</div><div class="line">    </div><div class="line">    // åœ¨å…³é—­è¿æ¥æ—¶æ³¨æ„å…³é—­é¡ºåºä¸å¯åŠ¨é¡ºåºç›¸å</div><div class="line">    defer &#123;</div><div class="line">        bson.close()</div><div class="line">        collection.close()</div><div class="line">        db.close()</div><div class="line">        client.close()</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    let result = collection.save(document: bson)</div><div class="line">    </div><div class="line">    response.setHeader(.contentType, value: "application/json</div><div class="line">    response.appendBody(string: request.postBodyString!)</div><div class="line">    response.completed()</div><div class="line">    &#125;)</div><div class="line">    </div><div class="line">    server.addRoutes(routes)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç°åœ¨æˆ‘ä»¬å€ŸåŠ©æ¥å£è°ƒè¯•å·¥å…·ï¼ˆPAW/Postmanç­‰ï¼‰æ¥æµ‹è¯•è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬ç¼–è¯‘è¿è¡ŒæœåŠ¡å™¨ï¼Œåœ¨æ¥å£è°ƒè¯•å·¥å…·ä¸­ï¼Œé€‰æ‹©POSTï¼Œåœ°å€<code>http://localhost:8181/add</code>ï¼Œbodyéƒ¨åˆ†ç»™å‡ºä¸€ä¸ªJSONå¯¹è±¡ï¼Œæ¯”å¦‚<code>{&quot;text&quot; : &quot;test&quot;, &quot;desc&quot; : &quot;description&quot;, &quot;detail&quot; : &quot;detail&quot; }</code>ï¼Œç„¶åæ‰“å‡ºè¯·æ±‚ï¼Œè¿”å›å€¼å¦‚æœæ˜¯æˆ‘ä»¬æ‰“å‡ºçš„JSONå¯¹è±¡ï¼Œè¯´æ˜è¯·æ±‚æ­£å¸¸è¿”å›äº†ã€‚æ¥ä¸‹æ¥ç”¨åˆšæ‰éƒ¨ç½²å¥½çš„<code>http://localhost:8181/mongo</code>æ¥å£æ¥éªŒè¯ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦çœŸçš„æ’å…¥äº†æ–°çš„æ•°æ®ï¼Œè¿”å›ç»“æœé»˜è®¤æ˜¯UTF8ç¼–ç ï¼Œå¦‚æœæœ‰ä¸­æ–‡ä¹±ç çš„æƒ…å†µå¯ä»¥è€ƒè™‘ä¸‹ç¼–ç æ˜¯å¦æœ‰é—®é¢˜ã€‚ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;<span class="attr">"data"</span>:[&#123; <span class="attr">"_id"</span> : &#123; <span class="attr">"$oid"</span> : <span class="string">"58203e113cba965b8d5616a2"</span> &#125;, <span class="attr">"text"</span> : <span class="string">"test"</span>, <span class="attr">"desc"</span> : <span class="string">"description"</span>, <span class="attr">"detail"</span> : <span class="string">"detail"</span> &#125;]&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æˆåŠŸäº†ã€‚</p>
<h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h2><p>æˆ‘ä»¬åœ¨ä¸Šç½‘æ—¶å¦‚æœè®¿é—®åˆ°ä¸å­˜åœ¨çš„èµ„æºï¼Œä¼šçœ‹åˆ°ä¸€ä¸ªâ€œ404 NOT FOUNDâ€é¡µé¢ï¼Œç±»ä¼¼è¿˜æœ‰â€œ403 FORBIDDENâ€ã€â€œ401 UNAUTHORIZEDâ€ç­‰ç­‰ï¼Œè¦å¯¹è¿™äº›é¡µé¢è¿›è¡Œè¿‡æ»¤ï¼Œå¹¶åœ¨å‘ç”Ÿé—®é¢˜çš„æ—¶å€™åšå‡ºä¸€äº›æ“ä½œï¼ŒPerfectä¸ºæˆ‘ä»¬æä¾›äº†<code>HTTPResponseFilter</code>ã€‚<code>HTTPResponseFilter</code>æ˜¯ä¸€ä¸ªåè®®ï¼Œå«æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œæœ¬ç€Swiftçš„â€œèƒ½ç”¨structå°±ä¸è¦ç”¨classâ€çš„æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªstructï¼Œéµå¾ª<code>HTTPResponseFilter</code>ï¼Œä½œä¸ºæˆ‘ä»¬çš„è¿‡æ»¤å™¨ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Filter404</span>: <span class="title">HTTPResponseFilter</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">filterBody</span><span class="params">(response: HTTPResponse, callback: <span class="params">(HTTPResponseFilterResult)</span></span></span> -&gt; ()) &#123;</div><div class="line">        callback(.<span class="keyword">continue</span>)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">func</span> <span class="title">filterHeaders</span><span class="params">(response: HTTPResponse, callback: <span class="params">(HTTPResponseFilterResult)</span></span></span> -&gt; ()) &#123;</div><div class="line">        <span class="keyword">if</span> <span class="keyword">case</span> .notFound = response.status &#123;</div><div class="line">            response.bodyBytes.removeAll()</div><div class="line">            response.setBody(string: <span class="string">"\(response.request.path) is not found."</span>)</div><div class="line">            response.setHeader(.contentLength, value: <span class="string">"\(response.bodyBytes.count)"</span>)</div><div class="line">            callback(.done)</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            callback(.<span class="keyword">continue</span>)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¤§æ¦‚æ„æ€å°±æ˜¯æ‹¦æˆªä¸‹responseï¼Œå¦‚æœçŠ¶æ€å€¼æ˜¯<code>notFound</code>ï¼Œæˆ‘ä»¬å°±æŠŠresponseçš„bodyæ”¹ä¸ºâ€œHehe â€¦â€¦ path â€¦â€¦ is not found.â€ã€‚</p>
<p>ç„¶åæˆ‘ä»¬åœ¨<code>main.swift</code>æ–‡ä»¶ä¸­ï¼ŒæŠŠä¹‹å‰å†™å¥½çš„ä»£ç ç¨åŠ æ”¹åŠ¨ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">do</span> &#123;</div><div class="line">	<span class="keyword">try</span> server</div><div class="line">        .setResponseFilters([(<span class="type">Filter404</span>(), .high)])</div><div class="line">        .start()</div><div class="line">&#125; <span class="keyword">catch</span> <span class="type">PerfectError</span>.networkError(<span class="keyword">let</span> err, <span class="keyword">let</span> msg) &#123;</div><div class="line">	<span class="built_in">print</span>(<span class="string">"Network error thrown: \(err) \(msg)"</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è®¾ç½®å¥½æˆ‘ä»¬çš„<code>Filter404()</code>ï¼Œè®¿é—®ä¸ªä¸å­˜åœ¨çš„èµ„æºè¯•ä¸€è¯•ï¼š<code>http://localhost:8181/hehe</code>ï¼Œæœç„¶å¦‚æ„¿ä»¥å¿åœ°æ˜¾ç¤ºäº†<code>/hehe is not found.</code></p>
<p>ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿‡æ»¤å…¶ä»–httpé”™è¯¯ï¼Œå…·ä½“å¯æŸ¥é˜…<code>HTTPResponse</code>ä¸­çš„<code>HTTPResponseStatus</code>ã€‚</p>
<h1 id="ä½•å»ä½•ä»"><a href="#ä½•å»ä½•ä»" class="headerlink" title="ä½•å»ä½•ä»"></a>ä½•å»ä½•ä»</h1><p>ç›®å‰çœ‹æ¥Perfectæä¾›çš„APIå·²ç»éå¸¸å®Œå–„äº†ï¼ŒåŸºæœ¬å…·å¤‡äº†ä¸€ä¸ªWebæœåŠ¡å™¨æ¡†æ¶çš„å¸¸ç”¨ç‰¹æ€§ã€‚ä½†æ˜¯ä»ç›®å‰çš„æ–‡æ¡£çœ‹æ¥ï¼ŒPerfectçš„APIå˜åŠ¨è¿˜æ˜¯æ¯”è¾ƒé¢‘ç¹çš„ï¼Œæˆ‘ä»¬å¤§å¯ä»¥æŠ±ç€ç©çš„æ€åº¦æ¥å¯¹å¾…è¿™ä¸ªSwift in serverã€‚ç›¸ä¿¡åœ¨SwiftæœåŠ¡å™¨å¼€å‘å®˜æ–¹å·¥ä½œç»„çš„æ¨åŠ¨ä¸‹ï¼Œæˆ‘ä»¬ä¸ä¹…å°±å¯ä»¥ç”¨è¿™é—¨å¹´è½»çš„è¯­è¨€æ¥å¼€å‘æˆ‘ä»¬çš„æœåŠ¡å™¨åº”ç”¨ã€‚</p>
<p>å…³äºéƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œæˆ‘è¿‘æœŸå¯ä»¥è¸©ä¸€è¸©è¿™éƒ¨åˆ†çš„å‘ï¼Œç›®å‰è®¡åˆ’æ˜¯ç”¨Ubuntu in Dockerçš„æ–¹å¼æ¥éƒ¨ç½²ã€‚æœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥æŒç»­å…³æ³¨æˆ‘çš„åšå®¢ã€‚</p>

        <div id="cyReward" role="cylabs" data-use="reward" sid="/blog/2016/11/08/Perfect-Swifter/" style="text-align: center;"></div>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://blog.talisk.cn//blog/2016/11/08/Perfect-Swifter/" data-id="cj3nrvdzw003g1hjv2yusl8ah" class="article-share-link" data-share="baidu" data-title="å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯">åˆ†äº«åˆ°</a>
      

      
        <a href="http://blog.talisk.cn//blog/2016/11/08/Perfect-Swifter/#SOHUCS" class="article-comment-link">è¯„è®º</a>
      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æœåŠ¡å™¨å¼€å‘/">æœåŠ¡å™¨å¼€å‘</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/èµ„æ–™/">èµ„æ–™</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2016/11/10/TextInput-RN-Limit/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          è®°ä¸€æ¬¡TextInputæ§ä»¶å­—ç¬¦é•¿åº¦é™åˆ¶
        
      </div>
    </a>
  
  
    <a href="/blog/2016/08/13/RN-Learning-path-for-iOS-developer/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">å†™ç»™iOSå¼€å‘è€…çš„React Nativeå­¦ä¹ è·¯çº¿</div>
    </a>
  
</nav>

  
</article>



<div id="SOHUCS" sid="/blog/2016/11/08/Perfect-Swifter/" ></div> 
<script type="text/javascript"> 
(function(){ 
var appid = 'cysVn6k21'; 
var conf = 'prod_c807695c3802256ad37ad0139f6629ea'; 
var width = window.innerWidth || document.documentElement.clientWidth; 
if (width < 960) { 
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="http://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("http://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

</section>
      
      <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">åˆ†ç±»</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/">æŠ€æœ¯</a><span class="category-list-count">44</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/C-C/">C/C++</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/C-C/å‡½æ•°å®ç°/">å‡½æ•°å®ç°</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/C-C/ç®—æ³•ä¸æ•°æ®ç»“æ„/">ç®—æ³•ä¸æ•°æ®ç»“æ„</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/Python/">Python</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/ReactNative/">ReactNative</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/ReactNative/å­¦ä¹ ç¬”è®°/">å­¦ä¹ ç¬”è®°</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/ReactNative/å¼€å‘æŠ€å·§/">å¼€å‘æŠ€å·§</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/iOS/">iOS</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/iOS/å­¦ä¹ ç¬”è®°/">å­¦ä¹ ç¬”è®°</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/iOS/å¼€å‘æŠ€å·§/">å¼€å‘æŠ€å·§</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/iOS/ç¬¬ä¸‰æ–¹åº“/">ç¬¬ä¸‰æ–¹åº“</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/ä¸“ä¸šè¯¾/">ä¸“ä¸šè¯¾</a><span class="category-list-count">11</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/ä¸“ä¸šè¯¾/æ“ä½œç³»ç»Ÿ/">æ“ä½œç³»ç»Ÿ</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/ä¸“ä¸šè¯¾/æ•°æ®åº“åŸç†åŠåº”ç”¨/">æ•°æ®åº“åŸç†åŠåº”ç”¨</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/ä¸“ä¸šè¯¾/è®¡ç®—æœºç½‘ç»œ/">è®¡ç®—æœºç½‘ç»œ</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/å‰ç«¯/">å‰ç«¯</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/æŠ€æœ¯/å‰ç«¯/å­¦ä¹ ç¬”è®°/">å­¦ä¹ ç¬”è®°</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/æœªåˆ†ç±»/">æœªåˆ†ç±»</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/éšç¬”/">éšç¬”</a><span class="category-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CocoaPods/">CocoaPods</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CodePush/">CodePush</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoreBluetooth/">CoreBluetooth</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/">JSON</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NSString/">NSString</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactNative/">ReactNative</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redux/">Redux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIApplication/">UIApplication</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UINavigation/">UINavigation</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UINavigationController/">UINavigationController</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UITableView/">UITableView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UITextField/">UITextField</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIWebView/">UIWebView</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIWindow/">UIWindow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOSåº”ç”¨å®¡æ ¸/">iOSåº”ç”¨å®¡æ ¸</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/podfile/">podfile</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/property/">property</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/äº’è”ç½‘/">äº’è”ç½‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/äº§å“/">äº§å“</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ä»£ç ç»Ÿè®¡/">ä»£ç ç»Ÿè®¡</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å†…å­˜ç®¡ç†/">å†…å­˜ç®¡ç†</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å†…å­˜é‡Šæ”¾/">å†…å­˜é‡Šæ”¾</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‡½æ•°/">å‡½æ•°</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/åˆ†äº«/">åˆ†äº«</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‰ç«¯/">å‰ç«¯</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å•ä¾‹/">å•ä¾‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å­—ç¬¦ä¸²/">å­—ç¬¦ä¸²</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å­¦ä¹ ç¬”è®°/">å­¦ä¹ ç¬”è®°</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å­¦ä¹ è·¯çº¿/">å­¦ä¹ è·¯çº¿</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¼€å‘æ—¥å¿—/">å¼€å‘æ—¥å¿—</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ€è€ƒ/">æ€è€ƒ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ€§èƒ½ä¼˜åŒ–/">æ€§èƒ½ä¼˜åŒ–</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æŠ€å·§/">æŠ€å·§</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ§ä»¶/">æ§ä»¶</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ“ä½œç³»ç»Ÿ/">æ“ä½œç³»ç»Ÿ</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°æ®åº“/">æ•°æ®åº“</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°æ®æŒä¹…åŒ–/">æ•°æ®æŒä¹…åŒ–</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°æ®ç»“æ„/">æ•°æ®ç»“æ„</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ—¥å¿—/">æ—¥å¿—</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æœåŠ¡å™¨å¼€å‘/">æœåŠ¡å™¨å¼€å‘</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/çˆ¬è™«/">çˆ¬è™«</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç¬¬ä¸‰æ–¹åº“/">ç¬¬ä¸‰æ–¹åº“</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è‡ªåŠ¨å¸ƒå±€/">è‡ªåŠ¨å¸ƒå±€</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è“ç‰™/">è“ç‰™</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¡ç®—æœºç½‘ç»œ/">è®¡ç®—æœºç½‘ç»œ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®°å½•/">è®°å½•</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è°ƒè¯•/">è°ƒè¯•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/èµ„æ–™/">èµ„æ–™</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/éšç¬”/">éšç¬”</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é¢è¯•/">é¢è¯•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/é¢è¯•é¢˜/">é¢è¯•é¢˜</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/tags/CocoaPods/" style="font-size: 12.86px;">CocoaPods</a> <a href="/tags/CodePush/" style="font-size: 10px;">CodePush</a> <a href="/tags/CoreBluetooth/" style="font-size: 10px;">CoreBluetooth</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/NSString/" style="font-size: 10px;">NSString</a> <a href="/tags/ReactNative/" style="font-size: 12.86px;">ReactNative</a> <a href="/tags/Redux/" style="font-size: 10px;">Redux</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/UIApplication/" style="font-size: 10px;">UIApplication</a> <a href="/tags/UINavigation/" style="font-size: 10px;">UINavigation</a> <a href="/tags/UINavigationController/" style="font-size: 10px;">UINavigationController</a> <a href="/tags/UITableView/" style="font-size: 10px;">UITableView</a> <a href="/tags/UITextField/" style="font-size: 10px;">UITextField</a> <a href="/tags/UIWebView/" style="font-size: 10px;">UIWebView</a> <a href="/tags/UIWindow/" style="font-size: 10px;">UIWindow</a> <a href="/tags/iOS/" style="font-size: 12.86px;">iOS</a> <a href="/tags/iOSåº”ç”¨å®¡æ ¸/" style="font-size: 10px;">iOSåº”ç”¨å®¡æ ¸</a> <a href="/tags/podfile/" style="font-size: 10px;">podfile</a> <a href="/tags/property/" style="font-size: 10px;">property</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/äº’è”ç½‘/" style="font-size: 10px;">äº’è”ç½‘</a> <a href="/tags/äº§å“/" style="font-size: 11.43px;">äº§å“</a> <a href="/tags/ä»£ç ç»Ÿè®¡/" style="font-size: 10px;">ä»£ç ç»Ÿè®¡</a> <a href="/tags/å†…å­˜ç®¡ç†/" style="font-size: 11.43px;">å†…å­˜ç®¡ç†</a> <a href="/tags/å†…å­˜é‡Šæ”¾/" style="font-size: 10px;">å†…å­˜é‡Šæ”¾</a> <a href="/tags/å‡½æ•°/" style="font-size: 11.43px;">å‡½æ•°</a> <a href="/tags/åˆ†äº«/" style="font-size: 10px;">åˆ†äº«</a> <a href="/tags/å‰ç«¯/" style="font-size: 10px;">å‰ç«¯</a> <a href="/tags/å•ä¾‹/" style="font-size: 10px;">å•ä¾‹</a> <a href="/tags/å­—ç¬¦ä¸²/" style="font-size: 10px;">å­—ç¬¦ä¸²</a> <a href="/tags/å­¦ä¹ ç¬”è®°/" style="font-size: 20px;">å­¦ä¹ ç¬”è®°</a> <a href="/tags/å­¦ä¹ è·¯çº¿/" style="font-size: 10px;">å­¦ä¹ è·¯çº¿</a> <a href="/tags/å¼€å‘æ—¥å¿—/" style="font-size: 14.29px;">å¼€å‘æ—¥å¿—</a> <a href="/tags/æ€è€ƒ/" style="font-size: 10px;">æ€è€ƒ</a> <a href="/tags/æ€§èƒ½ä¼˜åŒ–/" style="font-size: 10px;">æ€§èƒ½ä¼˜åŒ–</a> <a href="/tags/æŠ€å·§/" style="font-size: 18.57px;">æŠ€å·§</a> <a href="/tags/æ§ä»¶/" style="font-size: 15.71px;">æ§ä»¶</a> <a href="/tags/æ“ä½œç³»ç»Ÿ/" style="font-size: 17.14px;">æ“ä½œç³»ç»Ÿ</a> <a href="/tags/æ•°æ®åº“/" style="font-size: 14.29px;">æ•°æ®åº“</a> <a href="/tags/æ•°æ®æŒä¹…åŒ–/" style="font-size: 10px;">æ•°æ®æŒä¹…åŒ–</a> <a href="/tags/æ•°æ®ç»“æ„/" style="font-size: 10px;">æ•°æ®ç»“æ„</a> <a href="/tags/æ—¥å¿—/" style="font-size: 10px;">æ—¥å¿—</a> <a href="/tags/æœåŠ¡å™¨å¼€å‘/" style="font-size: 10px;">æœåŠ¡å™¨å¼€å‘</a> <a href="/tags/çˆ¬è™«/" style="font-size: 10px;">çˆ¬è™«</a> <a href="/tags/ç¬¬ä¸‰æ–¹åº“/" style="font-size: 15.71px;">ç¬¬ä¸‰æ–¹åº“</a> <a href="/tags/ç®—æ³•/" style="font-size: 10px;">ç®—æ³•</a> <a href="/tags/è‡ªåŠ¨å¸ƒå±€/" style="font-size: 10px;">è‡ªåŠ¨å¸ƒå±€</a> <a href="/tags/è“ç‰™/" style="font-size: 10px;">è“ç‰™</a> <a href="/tags/è®¡ç®—æœºç½‘ç»œ/" style="font-size: 10px;">è®¡ç®—æœºç½‘ç»œ</a> <a href="/tags/è®°å½•/" style="font-size: 12.86px;">è®°å½•</a> <a href="/tags/è°ƒè¯•/" style="font-size: 10px;">è°ƒè¯•</a> <a href="/tags/èµ„æ–™/" style="font-size: 11.43px;">èµ„æ–™</a> <a href="/tags/éšç¬”/" style="font-size: 15.71px;">éšç¬”</a> <a href="/tags/é¢è¯•/" style="font-size: 10px;">é¢è¯•</a> <a href="/tags/é¢è¯•é¢˜/" style="font-size: 11.43px;">é¢è¯•é¢˜</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">å››æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">ä¸€æœˆ 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">åä¸€æœˆ 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">å…«æœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">ä¸ƒæœˆ 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">äº”æœˆ 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">å››æœˆ 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">ä¸‰æœˆ 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">äºŒæœˆ 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">ä¸€æœˆ 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">åäºŒæœˆ 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">åä¸€æœˆ 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">åæœˆ 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">ä¹æœˆ 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">å…«æœˆ 2015</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">è¿‘æœŸæ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2017/04/15/Python-with-Selenium/">Seleniumå®æˆ˜ä¸¤ä¾‹ï¼šçˆ¬æ•°æ®/æŒ‚æœº</a>
          </li>
        
          <li>
            <a href="/blog/2017/01/24/Campus2017/">è®°2017å¹´æ ¡æ‹›</a>
          </li>
        
          <li>
            <a href="/blog/2016/11/10/TextInput-RN-Limit/">è®°ä¸€æ¬¡TextInputæ§ä»¶å­—ç¬¦é•¿åº¦é™åˆ¶</a>
          </li>
        
          <li>
            <a href="/blog/2016/11/08/Perfect-Swifter/">å…¨æ ˆSwifterï¼šç”¨Perfectæ¡†æ¶å¼€å‘æœåŠ¡å™¨ç«¯</a>
          </li>
        
          <li>
            <a href="/blog/2016/08/13/RN-Learning-path-for-iOS-developer/">å†™ç»™iOSå¼€å‘è€…çš„React Nativeå­¦ä¹ è·¯çº¿</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å‹æƒ…é“¾æ¥</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://blog.aiboms.cn/" target="_blank">AIBOMS - å¤§äº®</a>
          </li>
        
          <li>
            <a href="http://mouxuejie.com/" target="_blank">æŸå­¦å§ - ç¨‹åºåª›æ˜Ÿè·</a>
          </li>
        
          <li>
            <a href="http://smileshirely.github.io/" target="_blank">æŒ‡é—´èŠ±å¼€ - æ›¹ç¾å±¹</a>
          </li>
        
          <li>
            <a href="http://eqistyre.github.io/" target="_blank">SakuraNeko - å¼ ä»²æ˜Š</a>
          </li>
        
          <li>
            <a href="http://raylew.info/" target="_blank">çˆ±ä¸Šèµ°è·¯ - åˆ˜é›·</a>
          </li>
        
          <li>
            <a href="http://www.maskwang.cn/" target="_blank">MaskWang - æ±ªå¿—å³°</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
    <h3 class="widget-title">å…³æ³¨æˆ‘</h3>
    <div class="widget">
    	<li><a href="https://github.com/talisk">GitHub</a></li>
    	<li><a href="http://stackoverflow.com/users/4905807/swain">StackOverflow</a></li>
    	<li><a href="http://segmentfault.com/u/talisk">SegmentFault</a></li>
    	<li><a href="http://www.zhihu.com/people/talisk">çŸ¥ä¹</a></li>
    	<li><a href="http://weibo.com/u/1574201213">æ–°æµªå¾®åš</a></li>
    </div>
  </div>
  
    
  
    
  
    
  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      æ´¥ICPå¤‡15000729å· &copy; 2017 Swain <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1256072395'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1256072395' type='text/javascript'%3E%3C/script%3E"));</script>
      <br>
      æœ¬åšå®¢ç”±å¥½åƒä¸ä¸Šç«çš„<a href="http://hexo.io/" target="_blank">Hexo</a>å¼ºåŠ›é©±åŠ¨
      ä¸»é¢˜åŸºäºå¼€æºé¡¹ç›®<a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
      <br>
      talisk.cnå…¨ç«™å†…å®¹é‡‡ç”¨CC-BY-NCåè®®ï¼ˆç½²å-éå•†ä¸šæ€§ä½¿ç”¨ï¼‰è¿›è¡Œæˆæƒ
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="http://www.talisk.cn/" class="mobile-nav-link">ä¸ªäººä¸»é¡µ</a>
  
    <a href="/" class="mobile-nav-link">åšå®¢é¦–é¡µ</a>
  
    <a href="/archives" class="mobile-nav-link">å½’æ¡£</a>
  
    <a href="/about" class="mobile-nav-link">è‡ªè¿°</a>
  
    <a href="http://wiki.talisk.cn/" class="mobile-nav-link">Wiki</a>
  
    <a href="/works" class="mobile-nav-link">ä½œå“</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="è¿”å›é¡¶éƒ¨"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->

<!-- ç•…è¨€å…¬å…±jsä»£ç  start -->
<script type="text/javascript" charset="utf-8" src="https://changyan.itc.cn/js/lib/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="https://changyan.sohu.com/js/changyan.labs.https.js?appid=cysVn6k21"></script>
<!-- ç•…è¨€å…¬å…±jsä»£ç  end -->


<!-- æ–°ç™¾åº¦åˆ†äº« start -->
<div id="article-share-box" class="article-share-box">
<div id="bdshare" class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_mshare" data-cmd="mshare" title="åˆ†äº«åˆ°ä¸€é”®åˆ†äº«"></a><a href="#" class="bds_print" data-cmd="print" title="åˆ†äº«åˆ°æ‰“å°"></a><a href="#" class="bds_mail" data-cmd="mail" title="åˆ†äº«åˆ°é‚®ä»¶åˆ†äº«"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a><a href="#" class="bds_renren" data-cmd="renren" title="åˆ†äº«åˆ°äººäººç½‘"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="åˆ†äº«åˆ°QQç©ºé—´"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a><a href="#" class="bds_sqq" data-cmd="sqq" title="åˆ†äº«åˆ°QQå¥½å‹"></a><a href="#" class="bds_copy" data-cmd="copy" title="åˆ†äº«åˆ°å¤åˆ¶ç½‘å€"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
</div>
<!-- æ–°ç™¾åº¦åˆ†äº« end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js"></script>

</div>
</body>
</html>
